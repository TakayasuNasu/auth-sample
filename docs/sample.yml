openapi: 3.0.0
info:
  version: 1.0.0
  title: DPCOde Academy API
  description: DPCOde Academy API

servers:
  - url: https://localhost:8000

security:
  - BasicAuth: []

paths:
  /user:
    get:
      tags:
        - user
      description: Get all students data.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
                example:
                  - id: 1
                    name: David Beckham
                    birth: 2000/12/12
                    email: student1@gmail.com
                    phone: 1231231233
                    address: Vancouver
                  - id: 2
                    name: Eric Cantona
                    birth: 1990/11/11
                    email: student2@gmail.com
                    phone: 4564564567
                    address: Tokyo

  /user/{token}:
    get:
      tags:
        - user
      description: Get specific student data by token.
      parameters:
        - $ref: "#/components/parameters/PageLimit"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              example:
                id: 1
                name: David Beckham
                birth: 2000/12/12
                email: student1@gmail.com
                phone: 1231231233
                address: Vancouver
        default:
          description: error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /students/{token}/courses:
    get:
      tags:
        - user
      description: Get courses of specific student has.
      parameters:
        - $ref: "#/components/parameters/PageLimit"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Course"
                example:
                  - id: 1
                    name: Python
                    duration: duration
                    schedules:
                      - 2021/05/10
                      - 2021/05/11
                      - 2021/05/12
                    description: Python for beginners.
                    image_path: /img/courses/card.jpg
                    features:
                      - 1
                      - 2
                      - 3
                    level: Beginner
                    prerequisites:
                      - 1
                      - 2
                    price: 2000
                    status: normal
                  - id: 2
                    name: Algorithm
                    duration: duration
                    schedules:
                      - 2021/05/13
                      - 2021/05/14
                      - 2021/05/15
                    description: Algorithm for intermediates.
                    image_path: /img/courses/card.jpg
                    features:
                      - 1
                    level: Intermediate
                    prerequisites:
                      - 1
                      - 3
                      - 5
                    price: 3500
                    status: hard
        default:
          description: error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /courses:
    get:
      tags:
        - courses
      description: Get all courses data.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Course"
                example:
                  - id: 1
                    name: Python
                    duration: duration
                    schedules:
                      - 2021/05/10
                      - 2021/05/11
                      - 2021/05/12
                    description: Python for beginners.
                    image_path: /img/courses/card.jpg
                    features:
                      - 1
                      - 2
                      - 3
                    level: Beginner
                    prerequisites:
                      - 1
                      - 2
                    price: 2000
                    status: normal
                  - id: 2
                    name: Algorithm
                    duration: duration
                    schedules:
                      - 2021/05/13
                      - 2021/05/14
                      - 2021/05/15
                    description: Algorithm for intermediates.
                    image_path: /img/courses/card.jpg
                    features:
                      - 1
                    level: Intermediate
                    prerequisites:
                      - 1
                      - 3
                      - 5
                    price: 3500
                    status: hard
    post:
      tags:
        - courses
      description: Create a new Course.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Course"
            example:
              name: Java
              schedules:
                - 2021/05/15
                - 2021/05/16
              description: Java fro beginners.
              image_path: /img/courses/card.jpg
              price: 2799
              status: hard
      responses:
        200:
          description: created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"

  /courses/{id}:
    get:
      tags:
        - courses
      description: Get specific courses data by id.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        default:
          description: error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    put:
      tags:
        - courses
      description: Update specific course data by id.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Course"
            example:
              id: 3
              name: Swift
              schedules:
                - 2021/05/17
              description: Swift fro beginners.
              image_path: /img/courses/card.jpg
              price: 4000
              status: normal
      responses:
        200:
          description: updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
              example:
                id: 3
                name: Swift
                schedules:
                  - 2021/05/17
                description: Swift fro beginners.
                image_path: /img/courses/card.jpg
                price: 4000
                status: normal
        default:
          description: error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    delete:
      tags:
        - courses
      description: Delete specific course data by id.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Course"
            example:
              id: 2
      responses:
        200:
          description: deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
              example:
                id: 2
        default:
          description: error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:
  parameters:
    PageLimit:
      name: limit
      in: query
      description: Limits the number
      schema:
        type: integer

  schemas:
    User:
      type: object
      properties:
        user_id:
          type: string
          description: |
            User's social account unique token id
        user_first_name:
          type: string
          description: |
            User's first name
        user_last_name:
          type: string
          description: |
            User's last name
        user_image_path:
          type: string
          description: |
            The path of a user's profile image
        user_birth:
          type: string
          example: 30/04/2021
          format: dd/mm/yyyy
          description: |
            User's birth day
        user_email:
          type: string
          description: |
            User's email
        user_phone:
          type: string
          example: 000-000-0000
          description: |
            User's phone number
        user_parent_first_name:
          type: string
          description: |
            User's parents first name
        user_parent_last_name:
          type: string
          description: |
            User's parents last name
        user_parent_email:
          type: string
          description: |
            User's parents email
        user_parent_phone:
          type: string
          example: 000-000-0000
          description: |
            User's parents phone number
        user_type:
          type: string
          example: student
          description: |
            User's type<br>
            Acceptable values are:
            - student
            - admin
        user_status:
          type: string
          example: applied
          description: |
            User status<br>
            Acceptable values are:
            - wait list - who waits for a next course
            - applied - who applied for a course but not paid yet
            - registered - who applied for a course and paid
            - resign - who quit a course

    Course:
      type: object
      properties:
        course_id:
          type: string
          example: DPCS100#001
          description: |
            Unique course ID
        course_name:
          type: string
          example: ADVANCED COMPETITIVE PROGRAMMING
          description: |
            Course name
        course_category:
          type: string
          example: cs
          description: |
            Course category
        course_status:
          type: string
          example: active
          description: |
            Course status<br>
            Acceptable values are:
            - archived - finished course
            - active - now opening course
            - inactive - future course
        course_start_date:
          type: string
          format: dd/mm/yyyy
          example: 30/04/2021
          description: |
            course start date
        course_end_date:
          type: string
          format: dd/mm/yyyy
          example: 30/07/2021
          description: |
            course end date
        course_class_schedules:
          type: array
          items:
            properties:
              start_time:
                type: string
                format: dd/mm/yyyy
                example: 30/04”/2021
              end_time:
                type: string
                format: dd/mm/yyyy
                example: 30/07/2021
          description: |
            A list of class schedules including a start date and an end date of a class.
        course_description:
          type: string
          description: |
            A description of a course 
        course_image_path:
          type: string
          example: /img/courses/card.jpg
          description: |
            A image path of a course
        course_features:
          type: array
          items:
            type: string
            example:
              - Learn the fundamentals of algorithms and data structures
              - Build a solid foundation to become a Competitive Programming wizard
          description: |
            A list of features of a course
        course_level:
          type: string
          example: Intermediate
          description: |
            The level of a course<br>
            Acceptable values are:
            - Beginner
            - Intermediate
            - Advanced
        course_prerequisites:
          type: array
          items:
            type: string
            example:
              - DPCS200
              - Programming Experience in C/C++
          description: |
             Courses, conditions, presimes, and status recommended to have before apply this course
        course_length:
          type: object
          properties:
            month:
              type: number
              example: 6
            weeks:
              type: number
              example: 26
            hours:
              type: number
              example: 3
          description: |
            An object including course month, weeks, and hours
        course_price:
          type: object
          properties:
            $:
              type: number
              example: 100
            hours:
              type: number
              example: 3
            periodicity:
              type: string
              example: weekly
          description: |
            An object including course price, hours, and periodicity
        course_available_schedules:
          type: array
          items:
            type: string
            format: dd/mm/yyyy
            example:
              - Tuesday 7pm - 9pm
              - Thursday 7pm - 9pm
              - Saturday 1pm - 3pm
          description:
            A list of available course schedules

    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            message:
              type: string
              example: Unexpected parameters received
            code:
              type: integer
              minimum: 100
              maximum: 600
              example: 190
